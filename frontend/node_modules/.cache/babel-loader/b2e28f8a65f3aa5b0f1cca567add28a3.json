{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Protectedroute = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  const handleInvalidToken = () => {\n    navigate(\"/login\");\n  }; // Function to handle server error\n\n\n  const handleServerError = () => {\n    console.error('Error validating token: Server Error');\n  };\n\n  useEffect(() => {\n    const token = window.localStorage.getItem('token');\n\n    if (!userToken) {\n      navigate(\"/login\");\n    } else {\n      fetch('/api/validate-token', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          token: userToken\n        })\n      }).then(response => {\n        if (response.ok) {\n          setIsLoggedIn(true);\n        } else {\n          handleInvalidToken();\n        }\n      }).catch(error => {\n        console.error('Error validating token:', error);\n        handleServerError();\n      });\n    }\n  }, [navigate]);\n  return isLoggedIn ? children : null;\n};\n\n_s(Protectedroute, \"ByRb0k4YO4RAgY8aI0kHhVwbeVA=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Protectedroute;\nexport default Protectedroute;\n\nvar _c;\n\n$RefreshReg$(_c, \"Protectedroute\");","map":{"version":3,"names":["useState","useEffect","useNavigate","Protectedroute","children","navigate","isLoggedIn","setIsLoggedIn","handleInvalidToken","handleServerError","console","error","token","window","localStorage","getItem","userToken","fetch","method","headers","body","JSON","stringify","then","response","ok","catch"],"sources":["C:/Users/asdas/Downloads/MERN-Auth-Tutorial-lesson-17/crud/frontend/src/components/Protectedroute.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Protectedroute = ({ children }) => {\r\n  const navigate = useNavigate();\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n\r\n  const handleInvalidToken = () => {\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  // Function to handle server error\r\n  const handleServerError = () => {\r\n    console.error('Error validating token: Server Error');\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = window.localStorage.getItem('token');\r\n  \r\n    if (!userToken) {\r\n      navigate(\"/login\");\r\n    } else {\r\n      fetch('/api/validate-token', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ token: userToken })\r\n      })\r\n      .then(response => {\r\n        if (response.ok) {\r\n          setIsLoggedIn(true);\r\n        } else {\r\n          handleInvalidToken();\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error validating token:', error);\r\n        handleServerError();\r\n      });\r\n    }\r\n  }, [navigate]);\r\n\r\n  return isLoggedIn ? children : null;\r\n};\r\n\r\nexport default Protectedroute;\r\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAEA,MAAMC,cAAc,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EACvC,MAAMC,QAAQ,GAAGH,WAAW,EAA5B;EACA,MAAM,CAACI,UAAD,EAAaC,aAAb,IAA8BP,QAAQ,CAAC,KAAD,CAA5C;;EAGA,MAAMQ,kBAAkB,GAAG,MAAM;IAC/BH,QAAQ,CAAC,QAAD,CAAR;EACD,CAFD,CALuC,CASvC;;;EACA,MAAMI,iBAAiB,GAAG,MAAM;IAC9BC,OAAO,CAACC,KAAR,CAAc,sCAAd;EACD,CAFD;;EAIAV,SAAS,CAAC,MAAM;IACd,MAAMW,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAd;;IAEA,IAAI,CAACC,SAAL,EAAgB;MACdX,QAAQ,CAAC,QAAD,CAAR;IACD,CAFD,MAEO;MACLY,KAAK,CAAC,qBAAD,EAAwB;QAC3BC,MAAM,EAAE,MADmB;QAE3BC,OAAO,EAAE;UACP,gBAAgB,kBADT;UAEP,iBAAkB,UAASP,KAAM;QAF1B,CAFkB;QAM3BQ,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UAAEV,KAAK,EAAEI;QAAT,CAAf;MANqB,CAAxB,CAAL,CAQCO,IARD,CAQMC,QAAQ,IAAI;QAChB,IAAIA,QAAQ,CAACC,EAAb,EAAiB;UACflB,aAAa,CAAC,IAAD,CAAb;QACD,CAFD,MAEO;UACLC,kBAAkB;QACnB;MACF,CAdD,EAeCkB,KAfD,CAeOf,KAAK,IAAI;QACdD,OAAO,CAACC,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;QACAF,iBAAiB;MAClB,CAlBD;IAmBD;EACF,CA1BQ,EA0BN,CAACJ,QAAD,CA1BM,CAAT;EA4BA,OAAOC,UAAU,GAAGF,QAAH,GAAc,IAA/B;AACD,CA3CD;;GAAMD,c;UACaD,W;;;KADbC,c;AA6CN,eAAeA,cAAf"},"metadata":{},"sourceType":"module"}